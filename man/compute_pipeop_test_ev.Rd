% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mbspls_test_ev.R
\name{compute_pipeop_test_ev}
\alias{compute_pipeop_test_ev}
\title{Compute prediction-side EV and latent correlation from a PipeOpMBsPLS state}
\usage{
compute_pipeop_test_ev(X_blocks_test, state)
}
\arguments{
\item{X_blocks_test}{\code{list} of numeric matrices; test data blocks
(\code{n_test Ã— p_b}). All blocks must have the same number of rows.}

\item{state}{\code{list}. Trained PipeOp state. Must contain at least:
\itemize{
\item \code{weights}: component-wise block weights (as in training),
\item \code{loadings}: (optional) component-wise block loadings,
\item \code{performance_metric}: \code{"mac"} or \code{"frobenius"},
\item \code{correlation_method}: (optional) \code{"pearson"} or \code{"spearman"}.
}}
}
\value{
A list of prediction-side metrics as returned by \code{\link{compute_test_ev}},
including incremental and cumulative EV, latent correlation per component, a
validity mask, and the test score matrix.
}
\description{
Convenience wrapper around \code{\link{compute_test_ev}} used during prediction
in \code{PipeOpMBsPLS}. It extracts trained weights/loadings and configuration
from a PipeOp state list and computes prediction-side explained variance and
latent correlation on a list of test blocks.
}
\details{
The wrapper always uses \code{deflate = TRUE} to mirror the sequential
(component-wise) behavior used during training. The correlation method for
MAC/Frobenius is taken from \code{state$correlation_method} when available;
otherwise it defaults to \code{"pearson"}.

If the state does not contain loadings (\code{state$loadings} is \code{NULL} or
empty), \code{\link{compute_test_ev}} will automatically fall back to
\code{loading_source = "test_ls"} (least-squares loadings on test residuals).
}
\keyword{internal}
