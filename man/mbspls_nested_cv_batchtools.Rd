% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mbspls_nested_cv_batch.R
\name{mbspls_nested_cv_batchtools}
\alias{mbspls_nested_cv_batchtools}
\title{Perform nested cross-validation for MB-sPLS using batchtools}
\usage{
mbspls_nested_cv_batchtools(
  task,
  graphlearner,
  rs_outer,
  rs_inner,
  ncomp,
  tuner_budget,
  tuning_early_stop = TRUE,
  performance_metric = c("mac", "frobenius"),
  val_test = c("none", "permutation", "bootstrap"),
  val_test_n = 1000L,
  val_test_alpha = 0.05,
  val_permute_all = TRUE,
  n_perm_tuning = 500L,
  perm_alpha_tuning = 0.05,
  store_payload = TRUE,
  reg_dir = "registry_mbspls_nestedcv",
  seed = 1L,
  cluster_function = batchtools::makeClusterFunctionsSocket(ncpus = 1L),
  autosubmit = FALSE
)
}
\arguments{
\item{task}{An \code{mlr3} task (supervised or unsupervised).}

\item{graphlearner}{An \code{mlr3} \code{GraphLearner} that implements MB-sPLS
(e.g., created with \code{mbspls_graph_learner()}).}

\item{rs_outer}{An \code{mlr3} resampling instance for the outer folds.}

\item{rs_inner}{An \code{mlr3} resampling instance for the inner folds.}

\item{ncomp}{Integer, maximum number of components to consider.}

\item{tuner_budget}{Integer, maximum number of evaluations for the tuner.}

\item{tuning_early_stop}{Logical, whether to stop tuning early if
non-significant components are found.}

\item{performance_metric}{Character, performance metric to optimize
("mac" or "frobenius").}

\item{val_test}{Character, type of validation test to perform
("none", "permutation", or "bootstrap").}

\item{val_test_n}{Integer, number of permutations or bootstrap samples
for the validation test (default is 1000).}

\item{val_test_alpha}{Numeric, significance level for the validation test
(default is 0.05).}

\item{val_permute_all}{Logical, whether to permute all blocks during
the validation test (default is TRUE).}

\item{n_perm_tuning}{Integer, number of permutations for the tuning
significance test (default is 500).}

\item{perm_alpha_tuning}{Numeric, significance level for the tuning
permutation test (default is 0.05).}

\item{store_payload}{Logical, whether to store the full payload from
each outer fold (may consume a lot of memory).}

\item{reg_dir}{Character, directory to store the \code{batchtools} registry.}

\item{seed}{Integer, random seed for reproducibility.}

\item{autosubmit}{Logical, whether to automatically submit the jobs
after creating the registry (default is FALSE).}

\item{workers}{Integer, number of parallel workers to use (default is
number of CPU cores minus one).}
}
\value{
A \code{batchtools} registry object. Use \code{collect_mbspls_nested_cv()}
to gather and summarize the results after all jobs are completed.
}
\description{
This function performs nested cross-validation for MB-sPLS using the
\code{batchtools} package to parallelize the outer folds as separate jobs.
Each outer fold is processed in a separate job, which tunes the MB-sPLS
model on the inner folds and evaluates it on the outer test fold.
The results are collected and summarized after all jobs are completed.
}
