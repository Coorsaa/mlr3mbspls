% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mbspls_nested_cv.R
\name{mbspls_nested_cv}
\alias{mbspls_nested_cv}
\title{Nested CV for unsupervised MB-sPLS}
\usage{
mbspls_nested_cv(
  task,
  graphlearner,
  rs_outer,
  rs_inner,
  ncomp,
  tuner_budget,
  tuning_early_stop = TRUE,
  performance_metric = c("mac", "frobenius"),
  val_test = c("none", "permutation", "bootstrap"),
  val_test_n = 1000L,
  val_test_alpha = 0.05,
  val_permute_all = TRUE,
  n_perm_tuning = 500L,
  perm_alpha_tuning = 0.05,
  store_payload = TRUE
)
}
\arguments{
\item{task}{\link[mlr3:Task]{mlr3::Task} with all pre-MBsPLS features.}

\item{graphlearner}{\link[mlr3pipelines:mlr_learners_graph]{mlr3pipelines::GraphLearner} with a PipeOpMBsPLS node.}

\item{rs_outer}{\link[mlr3:Resampling]{mlr3::Resampling} instantiated (outer) resampling.}

\item{rs_inner}{\link[mlr3:Resampling]{mlr3::Resampling} template (inner) resampling.}

\item{ncomp}{integer, max #components considered by the tuner.}

\item{tuner_budget}{integer, #candidate evaluations per component.}

\item{tuning_early_stop}{logical, stop tuning early if no sig. components.}

\item{performance_metric}{"mac" or "frobenius" for the latent correlation.}

\item{val_test}{"none", "permutation", or "bootstrap" — run on OUTER test.}

\item{val_test_n}{integer, permutations/boot reps on OUTER test.}

\item{val_test_alpha}{numeric, early-stop / CI level param for validation tests.}

\item{val_permute_all}{logical, permute all blocks in test validation.}

\item{n_perm_tuning}{integer, permutations used inside the tuner’s early stop.}

\item{perm_alpha_tuning}{numeric, tuner early-stop α (component-wise).}

\item{store_payload}{logical, keep the full PipeOpMBsPLS predict payload.}
}
\value{
list with:
\itemize{
\item results: data.table with per-outer-split summary (inner_score, test MACs, etc.)
\item c_mats: list of tuned C* matrices per outer split
\item inner_scores: numeric vector of best inner-CV scores (one per outer split)
\item payloads: (optional) list of PipeOp logging payloads for each outer test
\item summary_table: data.table with aggregated metrics across outer splits
}
}
\description{
Perform nested cross-validation for unsupervised multi-block sparse PLS
(MB-sPLS) using a specified resampling strategy.
This function tunes the model on inner folds and evaluates it on outer folds,
returning a summary of results.
}
